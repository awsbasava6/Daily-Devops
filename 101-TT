

                                                               "DAILY-DevOps"

                                                 ********** 101-TT Today's Troubleshooting***********

=======================================================================================================================================================================================
Q1)  If your application is running on an EC2 instance and you experience a traffic spike during business hours, you need to think about scalability, availability, and cost optimization.
Here’s how you can handle it step by step:

1. Vertical Scaling (Short-Term Quick Fix)
⦁	If the spike is temporary and you’re running on a small instance type, you can:
            Stop the instance → Change instance type → Restart.
            Example: t3.medium → m5.large.
⦁	Downside: downtime during resizing, and scaling up has limits.

2. Horizontal Scaling (Long-Term, Recommended)
⦁	Use an Auto Scaling Group (ASG):
   Define min, max, desired capacity.
   Add scaling policies (e.g., scale out when CPU > 70% or request count > threshold).
⦁	Use an Elastic Load Balancer (ALB/NLB) in front of EC2s:
   Distributes traffic across multiple instances.
   Ensures high availability across multiple AZs.

3. Caching & Offloading
⦁	Enable caching layers:
     Use Amazon CloudFront (CDN) to cache static assets close to users.
⦁	Use ElastiCache (Redis/Memcached) to reduce DB load.
   Optimize DB with read replicas or Aurora Serverless if using RDS.

4. Decoupling Workloads
⦁	If spikes cause heavy background jobs:
        Offload to SQS + Lambda/EC2 workers. This smooths out sudden load instead of hitting your EC2 directly
5 Monitoring & Alerts
⦁ Set up CloudWatch Alarms:
     CPU, memory (via CloudWatch Agent), latency, request count.
    Get notified before the instance is overwhelmed.
===================================================================================================================================================================================
Q2)   Troubleshooting EC2 crashes.
Here’s how you should approach it systematically:

1. Check Instance Status
⦁	Go to EC2 console → Status Checks:
   	System status check failed → Problem with AWS host (e.g., hardware, network, hypervisor). Open an AWS Support case or stop/start the instance.
    Instance status check failed → Problem with your instance (OS, boot issues, app crash).

2. Review CloudWatch Metrics
⦁	Look at CPU, memory (if CloudWatch Agent is installed), disk I/O, and network traffic.
      If you see spikes just before the crash → could indicate memory leaks, runaway processes, or high I/O.

3. Inspect Logs
⦁	CloudWatch Logs (if configured) → App/system logs.
       EC2 Console → Get System Log: Shows boot issues, kernel panics, or misconfigurations.
       Serial Console (if enabled) → Useful for debugging low-level boot problems.

4. Access the Root Volume
If the instance won’t boot:
⦁	Detach the root EBS volume,Attach it to another healthy instance.
⦁	Mount and inspect: /var/log/messages, /var/log/syslog, /var/log/dmesg.
⦁	Fix bad configs (firewall rules, corrupted fstab, kernel params).
⦁	Reattach and restart.

5. Networking & Security
⦁	If crash looks like "not reachable":
      heck Security Groups, NACLs, Route Tables. Ensure the instance still has a valid Elastic IP / Public IP.

6. Application-Level Issues
⦁	Sometimes it’s not the EC2 itself but the app crashing.
     	Restart services via SSM Session Manager (no need for SSH if agent is running).
       Check for memory leaks, unhandled exceptions, or DB connection limits.

7. Preventive Measures
⦁	Use Auto Scaling Groups (ASG) so a new instance replaces the crashed one automatically.
⦁	Take regular AMIs & snapshots.
⦁	Implement CloudWatch alarms for proactive detection.
===================================================================================================================================
Q3) If your EC2 app cannot fetch images from the internet, here are the possible issues:

1. Networking / Internet Access
No Internet Gateway (IGW) attached to the VPC.
Instance is in a private subnet with no NAT Gateway/NAT Instance.
Route table misconfigured (missing route 0.0.0.0/0 → IGW/NAT).
Security Group not allowing outbound HTTP/HTTPS (port 80/443).
NACLs blocking outbound or inbound return traffic.

2. OS / DNS Resolution
Instance cannot resolve domains due to DNS issues:
oWrong /etc/resolv.conf.
oVPC DHCP option set not configured with correct DNS.
Firewall rules (e.g., iptables/ufw) blocking outbound requests.

3. IAM / Proxy Constraints
If fetching from S3 or other AWS service → missing IAM role/policy.
If organization uses a proxy for internet → app may need proxy configuration.

4. Application-Level Issues
App code misconfigured (wrong URL, HTTPS cert issue, timeout).
Dependency/library issue in code (SSL verification failure, etc.).
========================================================================================================================================================================================


Q4) HOW TO Connect On-Premises to AWS??
Options to Connect On-Premises to AWS
1. Site-to-Site VPN (IPsec VPN)
Connects your on-premises network to AWS VPC over the public internet using an encrypted VPN tunnel.
Quick to set up, cheaper, but subject to internet latency and bandwidth limits.
Requires a Virtual Private Gateway or Transit Gateway on AWS side.

2. AWS Direct Connect (DX)
A dedicated private fiber connection between your data center and AWS.
Provides low latency, high bandwidth (1 Gbps / 10 Gbps / 100 Gbps).
Not over the internet → more reliable, secure.
Often used by enterprises with heavy data transfer needs.

3. Hybrid Approach (VPN + Direct Connect)
Common best practice:
oUse Direct Connect for primary (fast, stable link).
oUse Site-to-Site VPN as a backup for failover (high availability).

4. AWS Transit Gateway (TGW)
If you have multiple VPCs and multiple data centers/branches:
oConnect them centrally using Transit Gateway.
oSimplifies complex networking instead of building many point-to-point VPNs.

5. AWS Snowball Edge / DataSync (for one-time migration)
If the question implies data transfer only (not continuous networking):
oSnowball Edge → large physical device shipped to you for petabyte-scale data transfer.
oDataSync → agent-based, syncs on-prem storage with AWS storage services (EFS, S3, FSx).
========================================================================================================================
QUESTION 5) I have two EC2 instances in two VPC one in each. First one isrunning frontend app and second one is running backend.These two apps need to communicate but they are not able to
communicate. How will you fix this?
ANSWER: Networking Between VPCs
By default, VPCs are isolated. To allow communication:
 Option A: VPC Peering
o Create a VPC peering connection between VPC A and VPC B.
o Update route tables in both VPCs to send traffic destined for the peer VPC
CIDR through the peering link.
 Option B: Transit Gateway (if multiple VPCs)
o Attach both VPCs to a Transit Gateway and update routes.
 Option C: PrivateLink (if only frontend needs to access backend service via
NLB/ALB).

2. Security Groups
 Backend EC2’s SG must allow inbound traffic from frontend’s EC2 IP / SG on the
required port (e.g., 8080, 443, etc.).
 Frontend EC2’s SG must allow outbound traffic to backend.

3. Network ACLs
 Ensure NACLs allow traffic in both directions between subnets.

4. DNS / Hostname Resolution
 If using DNS names:
o Enable DNS resolution in VPC settings.
o Ensure the hostname resolves to private IP (if using PrivateLink/peering).

5. Application-Level
 Verify backend app is listening on the right interface (0.0.0.0, not just localhost).
 Test connectivity with telnet/curl from frontend EC2 to backend EC2’s private IP.
-=======================================================================================
  QUESTION 6) I have an app running on EC2 instance. Product icons are stored in S3 bucket which needs to be shown on web home page. When my application is trying to tetch it's resulting into error. What might be the problem here?
ANSWER: "If my app on EC2 cannot fetch product icons from S3, I’d check a few things: First, whether the EC2 instance has the right IAM role and permissions (s3:GetObject).
If the bucket objects need to be public, I’d verify the bucket policy and object ACLs. Next, I’d confirm that the EC2 instance can actually reach S3 ,
if it’s in a private subnet without internet, I’d configure a VPC S3 Endpoint or a NAT gateway. If the request is coming from the browser, I’d also check CORS settings. 
Finally, I’d validate the app is using the correct S3 bucket region and endpoint."

